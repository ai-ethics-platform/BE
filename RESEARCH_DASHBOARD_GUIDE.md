# 🔬 AI Ethics 연구 데이터 대시보드 사용 설명서

> **대시보드 URL:** https://dilemmai-idl.com/research/dashboard

---

## 📋 목차

1. [시작하기](#시작하기)
2. [전체 통계 요약](#1-전체-통계-요약)
3. [데이터 다운로드](#2-데이터-다운로드)
4. [특정 방 조회](#3-특정-방-조회)
5. [특정 사용자 조회](#4-특정-사용자-조회)
6. [음성 녹음 파일 조회](#5-음성-녹음-파일-조회)
7. [선택 데이터 분석](#6-선택-데이터-분석)
8. [디버깅 정보](#7-디버깅-정보)
9. [자주 묻는 질문 (FAQ)](#자주-묻는-질문-faq)

---

## 시작하기

### 대시보드 접속

1. 웹 브라우저를 엽니다 (Chrome, Edge, Safari 등)
2. 주소창에 입력: `https://dilemmai-idl.com/research/dashboard`
3. 페이지가 로드되면 자동으로 전체 통계가 표시됩니다

### 화면 구성

대시보드는 7개의 주요 섹션으로 구성되어 있습니다:

```
┌─────────────────────────────────────┐
│  🎯 전체 통계 요약                    │
├─────────────────────────────────────┤
│  💾 데이터 다운로드                   │
├─────────────────────────────────────┤
│  🏠 특정 방(Room) 조회                │
├─────────────────────────────────────┤
│  👤 특정 사용자 조회                  │
├─────────────────────────────────────┤
│  🎤 음성 녹음 파일 조회               │
├─────────────────────────────────────┤
│  📊 선택 데이터 분석                  │
├─────────────────────────────────────┤
│  🐛 디버깅 정보                       │
└─────────────────────────────────────┘
```

---

## 1️⃣ 전체 통계 요약

### 기능 설명

실험의 전체 통계를 한눈에 확인할 수 있습니다.

### 표시 항목

- **총 사용자**: 회원가입한 사용자 수 (게스트 제외)
- **동의한 사용자**: 데이터 및 음성 녹음에 동의한 사용자 수
- **총 방(Room) 수**: 생성된 모든 방의 개수
- **시작된 게임 수**: 실제로 게임이 시작된 방의 개수
- **라운드 선택 수**: 개인이 라운드별로 선택한 총 횟수
- **음성 녹음 수**: 저장된 음성 파일의 개수

### 사용 방법

1. 페이지 접속 시 **자동으로 로딩**됩니다
2. 수동으로 업데이트하려면: **"통계 불러오기"** 버튼 클릭

### 예시

```
✅ 데이터 조회 성공

총 사용자: 277명
동의한 사용자: 180명
총 방(Room): 760개
시작된 게임: 450개
라운드 선택: 1,512개
음성 녹음: 890개
```

---

## 2️⃣ 데이터 다운로드

### 기능 설명

모든 실험 데이터를 파일로 다운로드할 수 있습니다.

### 다운로드 옵션

#### 📗 엑셀 파일 (Excel)

**언제 사용?**
- 엑셀, Google Sheets에서 데이터를 분석할 때
- 비프로그래머가 데이터를 확인할 때
- 피벗 테이블, 차트를 만들 때

**포함 데이터:**
- 사용자 정보 (이름, 이메일, 성별, 학력 등)
- 게임 세션 정보 (방 코드, 주제, 참가자)
- 라운드별 선택 (R1~R5 개인 선택, 합의 선택)
- 확신도 (Confidence)

**사용 방법:**
1. **"엑셀 다운로드 (Excel)"** 버튼 클릭
2. 파일이 자동으로 다운로드됨: `실험데이터_YYYYMMDD_HHMMSS.xlsx`
3. Excel, Google Sheets, LibreOffice에서 열기

**예시 파일 구조:**
```
| episode_code | participant_id | username | R1_role | R1_choice | R1_confidence | ... |
|--------------|----------------|----------|---------|-----------|---------------|-----|
| 896453       | 123            | user1    | 1       | 1         | 4             | ... |
```

#### 📘 JSON 파일

**언제 사용?**
- Python, R, JavaScript로 데이터를 분석할 때
- API로 데이터를 가져올 때
- 프로그래밍으로 데이터 처리할 때

**사용 방법:**
1. **"JSON 다운로드"** 버튼 클릭
2. JSON 파일이 다운로드됨
3. Python pandas, R jsonlite 등으로 로드

**Python 예시:**
```python
import requests
import pandas as pd

# JSON 데이터 다운로드
response = requests.get("https://dilemmai-idl.com/research/experiments/export?limit=1000")
data = response.json()

# DataFrame으로 변환
rooms = data['rooms']
df = pd.json_normalize(rooms)

# 분석
print(df['topic'].value_counts())
```

---

## 3️⃣ 특정 방 조회

### 기능 설명

6자리 **입장 코드**로 특정 게임 방의 상세 정보를 조회합니다.

### 사용 방법

#### Step 1: 입장 코드 확인

방 입장 코드는 6자리 숫자입니다. (예: `896453`, `507117`)

**입장 코드는 어디서 확인?**
- 게임 참가자에게 문의
- MySQL 데이터베이스의 `rooms` 테이블 `room_code` 컬럼
- 전체 방 목록 API: `/research/experiments/export`

#### Step 2: 입장 코드 입력

1. "특정 방(Room) 조회" 섹션으로 스크롤
2. **"입장 코드 (6자리)"** 입력란에 코드 입력
3. **"방 데이터 조회"** 버튼 클릭

#### Step 3: 결과 확인

**표시 정보:**
- ✅ 데이터 조회 성공
- **방 제목**: 방 생성 시 입력한 제목
- **입장 코드**: 6자리 코드
- **주제**: 게임 주제 (안드로이드, AWS 등)
- **참가자 수**: 방에 참여한 인원
- **시작 여부**: ✅ 시작됨 / ⏳ 대기 중
- **음성 녹음**: 녹음된 파일 개수

**전체 JSON 데이터:**
- "📄 전체 JSON 데이터 보기" 클릭하면 상세 정보 표시
- 참가자 목록, 라운드별 선택, 음성 세션 정보 포함

### 예시

**입력:**
```
입장 코드: 896453
```

**출력:**
```
✅ 데이터 조회 성공

안드로이드 트로봇 방
입장 코드: 896453
주제: 안드로이드
참가자 수: 3명
시작 여부: ✅ 시작됨
음성 녹음: 5개

📄 전체 JSON 데이터 보기 ▼
```

### 오류 해결

**오류: "입장 코드 "896453"에 해당하는 방을 찾을 수 없습니다"**
- 입장 코드를 다시 확인하세요
- 6자리가 맞는지 확인하세요
- MySQL에서 해당 코드가 존재하는지 확인하세요

---

## 4️⃣ 특정 사용자 조회

### 기능 설명

User ID로 특정 사용자의 모든 참여 기록을 조회합니다.

### 사용 방법

#### Step 1: User ID 확인

User ID는 데이터베이스의 고유 번호입니다. (예: `123`, `456`)

**User ID는 어디서 확인?**
- MySQL 데이터베이스의 `users` 테이블 `id` 컬럼
- 엑셀 다운로드 파일의 `participant_id` 컬럼
- 통계 요약 API

#### Step 2: User ID 입력

1. "특정 사용자 조회" 섹션으로 스크롤
2. **"User ID"** 입력란에 숫자 입력
3. **"사용자 데이터 조회"** 버튼 클릭

#### Step 3: 결과 확인

**표시 정보:**
- 사용자 기본 정보 (이름, 이메일, 학력 등)
- 참여한 게임 목록
- 라운드별 선택 패턴
- 음성 녹음 이력

### 예시

**입력:**
```
User ID: 456
```

**출력:**
```
✅ 데이터 조회 성공

사용자 정보
총 참여 게임: 5개
총 라운드 선택: 25개
음성 녹음: 3개

📄 전체 JSON 데이터 보기 ▼
```

---

## 5️⃣ 음성 녹음 파일 조회

### 기능 설명

게임 중 녹음된 음성 파일을 조회하고 다운로드할 수 있습니다.

### 필터 옵션

| 필터 | 설명 | 예시 |
|------|------|------|
| **방 코드** | 6자리 입장 코드로 검색 | `896453` |
| **방 ID** | 데이터베이스 Room ID | `123` |
| **방장 ID** | 방을 생성한 사용자 ID | `1` |
| **사용자 ID** | 특정 사용자의 녹음만 조회 | `456` |
| **시작 날짜** | 날짜 범위 시작 | `2026-01-01` |
| **종료 날짜** | 날짜 범위 끝 | `2026-02-01` |

### 사용 방법

#### 방법 1: 특정 방의 음성 파일 조회

1. **"방 코드 (6자리)"** 입력란에 입장 코드 입력
2. **"🔍 음성 파일 조회"** 버튼 클릭
3. 결과 테이블에서 음성 파일 확인

#### 방법 2: 전체 음성 파일 조회

1. 필터를 입력하지 않고
2. **"📋 전체 음성 파일 보기"** 버튼 클릭
3. 모든 음성 파일 목록 표시 (최대 100개)

#### 방법 3: 필터 조합 사용

**예시 1: 특정 방장의 모든 방 음성 파일**
```
방장 ID: 1
→ "🔍 음성 파일 조회" 클릭
```

**예시 2: 특정 기간의 음성 파일**
```
시작 날짜: 2026-01-01
종료 날짜: 2026-01-31
→ "🔍 음성 파일 조회" 클릭
```

**예시 3: 특정 사용자의 녹음**
```
사용자 ID: 456
→ "🔍 음성 파일 조회" 클릭
```

### 결과 테이블

조회 결과는 테이블로 표시됩니다:

| ID | 방 코드 | 주제 | 사용자 | 파일 크기 | 녹음 시간 | 생성일 | S3 URL |
|----|---------|------|--------|-----------|-----------|--------|---------|
| 92 | 507117 | Android | en_test03 | 6.6 KB | N/A | 2026.2.1. 오후 8:17:04 | 🔗 파일 열기 ⬇️ 다운로드 |

### 음성 파일 다운로드

각 음성 파일마다 2개의 버튼이 있습니다:

#### 🔗 파일 열기
- 클릭 시 **새 탭**에서 음성 파일이 열립니다
- 브라우저에서 바로 재생할 수 있습니다
- **사용 방법:**
  1. "🔗 파일 열기" 클릭
  2. 새 탭에서 음성 재생
  3. 마우스 오른쪽 클릭 → "다른 이름으로 저장"

#### ⬇️ 다운로드
- 클릭 시 **즉시 다운로드**됩니다
- 파일명: `recording_92.wav` (ID 자동 포함)
- **사용 방법:**
  1. "⬇️ 다운로드" 클릭
  2. 다운로드 폴더에 저장됨

### 필터 초기화

여러 필터를 사용한 후:
1. **"🗑️ 필터 초기화"** 버튼 클릭
2. 모든 입력란이 비워집니다

### 예시

**시나리오: "안드로이드" 주제의 음성 파일 찾기**

1. 먼저 방 코드 확인 필요 → **"특정 방 조회"** 또는 MySQL 사용
2. 방 코드 입력: `507117`
3. "🔍 음성 파일 조회" 클릭
4. 결과 확인:
   ```
   총 5개의 음성 파일 조회

   ID: 92, 방 코드: 507117, 사용자: en_test03
   🔗 파일 열기 | ⬇️ 다운로드
   ```

---

## 6️⃣ 선택 데이터 분석

### 기능 설명

게임 중 참가자들의 선택 데이터를 통계적으로 분석할 수 있습니다.

**3가지 분석 탭:**
- 📌 **주제별**: 전체 통계 요약
- 👥 **역할별**: 역할과 서브토픽별 선택 통계
- 🔄 **라운드별**: 라운드 1~5 선택 통계

### 사용 방법

#### Step 1: 주제 필터 선택 (선택사항)

특정 주제만 분석하고 싶을 때:
1. **"주제 필터"** 입력란에 주제명 입력
   - 예: `안드로이드`, `AWS`, `자율 무기 시스템`
2. 주제 필터를 사용하지 않으면 **전체 데이터** 분석

#### Step 2: 데이터 조회

1. **"분석 데이터 조회"** 버튼 클릭
2. 로딩 후 성공 메시지 표시:
   ```
   ✅ 데이터 조회 성공! 위의 탭을 클릭해서 데이터를 확인하세요.
   ```

#### Step 3: 탭 선택

3개의 탭이 나타납니다:

```
┌───────────┬───────────┬───────────┐
│ 📌 주제별 │ 👥 역할별 │ 🔄 라운드별 │
└───────────┴───────────┴───────────┘
```

원하는 탭을 클릭하여 데이터를 확인합니다.

---

### 📌 주제별 탭

#### 표시 정보

- 전체 통계 요약
- 라운드 선택 데이터 수
- 역할별 선택 데이터 수
- 전체 JSON 데이터

#### 예시

```
📌 전체 통계 (주제별 필터 적용됨)

라운드 선택: 15개 데이터
역할별 선택: 18개 데이터

📄 전체 JSON 보기 ▼
```

---

### 👥 역할별 탭

#### 표시 정보

**서브토픽별로 그룹화된 역할 통계**

각 서브토픽마다:
- 역할 이름 (요양보호사 K, 신입 병사 등)
- 선택 (왼쪽/오른쪽)
- 횟수

#### 역할 매핑

| 서브토픽 | 역할 1 | 역할 2 | 역할 3 |
|----------|--------|--------|--------|
| **AI의 개인 정보 수집** | 요양보호사 K | 노모 L | 자녀 J |
| **안드로이드의 감정 표현** | 요양보호사 K | 노모 L | 자녀 J |
| **아이들을 위한 서비스** | 로봇 제조사 연합회 대표 | 소비자 대표 | 국가 인공지능 위원회 대표 |
| **설명 가능한 AI** | 로봇 제조사 연합회 대표 | 소비자 대표 | 국가 인공지능 위원회 대표 |
| **지구, 인간, AI** | 기업 연합체 대표 | 국제 환경단체 대표 | 소비자 대표 |
| **AI 알고리즘 공개** | 지역 주민 | 병사 J | 군사 AI 윤리 전문가 |
| **AWS의 권한** | 신입 병사 | 베테랑 병사 A | 군 지휘관 |
| **사람이 죽지 않는 전쟁** | 개발자 | 국방부 장관 | 국가 인공지능 위원회 대표 |
| **AI의 권리와 책임** | 개발자 | 국방부 장관 | 국가 인공지능 위원회 대표 |
| **AWS 규제** | 국방 기술 고문 | 국제기구 외교 대표 | 글로벌 NGO 활동가 |

#### 예시

```
👥 역할별 선택 통계 (서브토픽별)

📌 AI의 개인 정보 수집
┌────────────────┬────────┬────────┐
│ 역할           │ 선택   │ 횟수   │
├────────────────┼────────┼────────┤
│ 요양보호사 K    │ 왼쪽   │ 21회   │
│ 노모 L         │ 왼쪽   │ 16회   │
│ 자녀 J         │ 왼쪽   │ 17회   │
└────────────────┴────────┴────────┘

📌 AWS의 권한
┌────────────────┬────────┬────────┐
│ 역할           │ 선택   │ 횟수   │
├────────────────┼────────┼────────┤
│ 신입 병사       │ 왼쪽   │ 341회  │
│ 베테랑 병사 A   │ 오른쪽 │ 202회  │
│ 군 지휘관       │ 왼쪽   │ 303회  │
└────────────────┴────────┴────────┘
```

---

### 🔄 라운드별 탭

#### 표시 정보

라운드 1~5 각각의:
- 선택 (왼쪽/오른쪽)
- 횟수
- 평균 확신도 (1~5)

#### 예시

```
🔄 라운드별 선택 통계

┌──────────┬────────┬────────┬──────────────┐
│ 라운드   │ 선택   │ 횟수   │ 평균 확신도  │
├──────────┼────────┼────────┼──────────────┤
│ 라운드 1 │ 왼쪽   │ 297회  │ 3.80         │
│ 라운드 1 │ 오른쪽 │ 243회  │ 4.10         │
│ 라운드 2 │ 왼쪽   │ 341회  │ 3.50         │
│ 라운드 2 │ 오른쪽 │ 202회  │ 4.20         │
│ 라운드 3 │ 왼쪽   │ 303회  │ 3.90         │
│ 라운드 3 │ 오른쪽 │ 241회  │ 4.05         │
└──────────┴────────┴────────┴──────────────┘
```

---

## 7️⃣ 디버깅 정보

### 기능 설명

데이터베이스 상태를 확인하는 개발자용 기능입니다.

### 사용 방법

1. **"디버깅 정보 확인"** 버튼 클릭
2. 데이터베이스의 각 테이블 개수 확인

### 표시 정보

```json
{
  "total_rooms": 760,
  "total_participants": 1693,
  "total_users": 277,
  "total_round_choices": 1512,
  "total_consensus_choices": 466,
  "sample_rooms": [
    {
      "id": 1,
      "room_code": "352518",
      "topic": "녹음 테스트를 위해 만든 방",
      "is_started": false
    }
  ]
}
```

### 사용 시기

- 데이터가 제대로 저장되었는지 확인할 때
- 통계 수치가 이상할 때
- 개발 중 테스트 데이터 확인할 때

---

## 🔍 자주 묻는 질문 (FAQ)

### Q1. 데이터가 비어있다고 나와요

**A:** 필터 조건을 확인하세요.
- 엑셀 다운로드: URL에 `started_only=false&with_consent_only=false` 추가
- 음성 파일 조회: "전체 음성 파일 보기" 버튼 사용
- 디버깅 정보로 실제 데이터가 있는지 확인

### Q2. 입장 코드를 어디서 찾나요?

**A:** 3가지 방법:
1. MySQL Workbench에서 `SELECT room_code FROM rooms;`
2. 엑셀 다운로드 후 `episode_code` 컬럼 확인
3. 게임 참가자에게 문의

### Q3. 음성 파일이 재생되지 않아요

**A:** 확인 사항:
- 파일 URL이 `https://dilemmai-idl.com/recordings/...`로 시작하는지 확인
- 브라우저 콘솔에서 에러 확인 (F12 → Console 탭)
- 파일이 서버에 실제로 존재하는지 확인

### Q4. 역할이 "역할 1"로만 나와요

**A:** 서브토픽 정보가 없는 데이터입니다.
- "서브토픽 없음" 데이터는 자동으로 제외됩니다
- 게임 중 서브토픽이 제대로 저장되었는지 확인하세요

### Q5. 엑셀 파일이 다운로드되지 않아요

**A:** 해결 방법:
1. 브라우저 팝업 차단 해제
2. 직접 URL 접속: `https://dilemmai-idl.com/research/experiments/export/excel`
3. 다른 브라우저 시도 (Chrome, Edge 추천)

### Q6. 선택 데이터 분석에서 "왼쪽"과 "오른쪽"은 무엇인가요?

**A:** 게임에서의 선택을 의미합니다:
- **왼쪽 (선택 1)**: 게임 화면 왼쪽 옵션을 선택한 경우
- **오른쪽 (선택 2)**: 게임 화면 오른쪽 옵션을 선택한 경우

### Q7. 주제 필터에 무엇을 입력해야 하나요?

**A:** 정확한 주제명을 입력하세요:
- ✅ 올바른 예: `안드로이드`, `자율 무기 시스템`
- ❌ 잘못된 예: `안드`, `AWS시스템`

MySQL에서 확인: `SELECT DISTINCT topic FROM rooms;`

---

## 📞 지원

### 문제 발생 시

1. **브라우저 콘솔 확인**: F12 → Console 탭
2. **네트워크 탭 확인**: F12 → Network 탭
3. **API 문서 확인**: https://dilemmai-idl.com/docs

### 연락처

- **백엔드 개발자**: 재령
- **GitHub Issues**: (프로젝트 저장소)

---

## 📝 참고 자료

- **API 문서**: https://dilemmai-idl.com/docs
- **엑셀 Export 가이드**: `EXCEL_EXPORT_GUIDE.md`
- **연구 API 가이드**: `RESEARCH_API_GUIDE.md`
- **WebRTC TURN 설정**: `WEBRTC_TURN_SETUP.md`

---

**마지막 업데이트:** 2026년 2월 2일  
**버전:** 1.0  
**작성자:** AI Assistant
